// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
    provider = "prisma-client"
    output   = "../src/generated/prisma"
}

datasource db {
    provider = "postgresql"
}

model Quote {
    id          Int          @id @default(autoincrement())
    quote       String
    author      String
    source      String?
    quoteRu     String?
    authorRu    String?
    sourceRu    String?
    dailyQuotes DailyQuote[]

    @@unique([author, quote])
    @@unique([authorRu, quoteRu])
}

model DailyQuote {
    date    DateTime @id @default(now()) @db.Date
    quote   Quote    @relation(fields: [quoteId], references: [id])
    quoteId Int
}

model ScheduleItem {
    id                  Int                  @id @default(autoincrement())
    date                DateTime             @db.Date
    location            String
    title               String
    locationRu          String?
    titleRu             String?
    scheduleItemTimes   ScheduleItemTime[]
    removedScheduleItem RemovedScheduleItem?

    @@unique([date, location])
    @@unique([date, locationRu])
}

model ScheduleItemTime {
    id             Int          @id @default(autoincrement())
    time           DateTime     @db.Time
    designation    String
    designationRu  String?
    scheduleItem   ScheduleItem @relation(fields: [scheduleItemId], references: [id], onDelete: Cascade)
    scheduleItemId Int

    @@unique([time, scheduleItemId])
}

model RemovedScheduleItem {
    scheduleItemId Int          @id
    scheduleItem   ScheduleItem @relation(fields: [scheduleItemId], references: [id], onDelete: Cascade)
}

model NewsArticle {
    id              Int              @id @default(autoincrement())
    link            String           @unique
    title           String
    author          String
    dateCreated     DateTime
    dateUpdated     DateTime?
    body            String
    snippet         String
    imageLink       String
    imageCaption    String?
    titleRu         String?
    authorRu        String?
    bodyRu          String?
    snippetRu       String?
    featuredArticle FeaturedArticle?
}

model FeaturedArticle {
    newsArticle   NewsArticle @relation(fields: [newsArticleId], references: [id], onDelete: Cascade)
    newsArticleId Int         @id
}

model GalleryImage {
    id        Int    @id @default(autoincrement())
    imageLink String
}

model DailyGalleryImage {
    id        Int      @id @default(autoincrement())
    date      DateTime @db.Date
    imageLink String

    @@unique([date, imageLink])
}

model ImagePlaceholder {
    imageLink   String @id
    placeholder String
}
